# Research / notes
Note:  These are very dirty and not to be intended to be any source of good reference... this is a scratchpad if you will.

### References

Following information was referenced before and after working on extending original repo dell-7820-fans.

[Linux Kernel documentation:  Kernel driver dell-smm-hwmon](https://www.kernel.org/doc/html/latest/hwmon/dell-smm-hwmon.html)

[Github:AaronKelley:DellFanManagement](https://github.com/AaronKelley/DellFanManagement)

[Arch:  Fan Speed Control](https://wiki.archlinux.org/title/Fan_speed_control) Arch Linux Documentation on fan control 

[github:algirdasc:t3600_fancontrol](https://github.com/algirdasc/t3600_fancontrol)

[github:clopez:dellfan](https://github.com/clopez/dellfan)

[Baeldung: Controlling Fan Speed in Linux](https://www.baeldung.com/linux/control-fan-speed)

[github:vitorasfsr:i8kutils](https://github.com/vitorafsr/i8kutils)



### Random commands and packages experimented with

`sensors` (part of lm-sensors)  
`sudo sensors -f -u`


`i8kctl fan`

Location where various temperature/fan sensors can be read:  
`/sys/class/hwmon/hwmon2/`

`fancontrol`



`sudo sensors-detect`  
Output (much truncated... this is from my 7820, 2x CPUs, Debian 12):
```
# sensors-detect version 3.6.0
# System: Dell Inc. Precision 7820 Tower
# Board: Dell Inc. 0804P1
# Kernel: 6.1.0-28-amd64 x86_64
# Processor: Intel(R) Xeon(R) Silver 4110 CPU @ 2.10GHz (6/85/4)

This program will help you determine which kernel modules you need
to load to use lm_sensors most effectively. It is generally safe
and recommended to accept the default answers to all questions,
unless you know what you're doing.

Some south bridges, CPUs or memory controllers contain embedded sensors.
Do you want to scan for them? This is totally safe. (YES/no): yes
Module cpuid loaded successfully.
............. truncated .............
Intel digital thermal sensor...                             Success!
    (driver `coretemp')
............. truncated .............

Some Super I/O chips contain embedded sensors. We have to write to
standard I/O ports to probe them. This is usually safe.
Do you want to scan for Super I/O sensors? (YES/no): yes
Probing for Super-I/O at 0x2e/0x2f
............. truncated .............
Trying family `SMSC'...                                     Yes
Found unknown chip with ID 0x3082
Probing for Super-I/O at 0x4e/0x4f
............. truncated, alot .............

Next adapter: NVIDIA i2c adapter 4 at 9e:00.0 (i2c-1)
Do you want to scan it? (yes/NO/selectively): yes

Next adapter: NVIDIA i2c adapter 5 at 9e:00.0 (i2c-2)
Do you want to scan it? (yes/NO/selectively): yes

Next adapter: NVIDIA i2c adapter 6 at 9e:00.0 (i2c-3)
Do you want to scan it? (yes/NO/selectively): yes

Next adapter: NVIDIA i2c adapter 7 at 9e:00.0 (i2c-4)
Do you want to scan it? (yes/NO/selectively): yes


Now follows a summary of the probes I have just done.
Just press ENTER to continue: yes

Driver `coretemp':
  * Chip `Intel digital thermal sensor' (confidence: 9)

To load everything that is needed, add this to /etc/modules:
#----cut here----
# Chip drivers
coretemp
#----cut here----
If you have some drivers built into your kernel, the list above will
contain too many modules. Skip the appropriate ones!

Do you want to add these lines automatically to /etc/modules? (yes/NO)no

Unloading cpuid... OK
```

---
fan control configuration

**/etc/fancontrol**
```
# Configuration file generated by pwmconfig, changes will be lost
INTERVAL=10
DEVPATH=hwmon2=devices/platform/dell_smm_hwmon hwmon3=devices/platform/coretemp.0 hwmon4=devices/platform/coretemp.1
DEVNAME=hwmon2=dell_smm hwmon3=coretemp hwmon4=coretemp
FCTEMPS=hwmon2/pwm3=hwmon2/temp6_input hwmon2/pwm2=hwmon3/temp1_input hwmon2/pwm1=hwmon4/temp1_input
FCFANS=hwmon2/pwm3=hwmon2/fan3_input hwmon2/pwm2=hwmon2/fan2_input hwmon2/pwm1=hwmon2/fan1_input
MINTEMP=hwmon2/pwm3=20 hwmon2/pwm2=20 hwmon2/pwm1=20
MAXTEMP=hwmon2/pwm3=50 hwmon2/pwm2=50 hwmon2/pwm1=50
MINSTART=hwmon2/pwm3=150 hwmon2/pwm2=150 hwmon2/pwm1=150
MINSTOP=hwmon2/pwm3=0 hwmon2/pwm2=0 hwmon2/pwm1=0
MAXPWM=hwmon2/pwm3=250 hwmon2/pwm2=250 hwmon2/pwm1=250
```

Start/stop fan control
`sudo systemctl start|stop fancontrol`

---
#### i8kmon
Cmd:  `i8kmon -v`   
`man i8kmon`:  
> The  i8kmon  is  a  daemon  that monitors the cpu temperature, and control the
> fan speed on some Dell laptops. It does that by means of regularly reading the
> system temperature, and choosing appropriate speed of the fans.
